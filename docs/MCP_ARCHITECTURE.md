# MCPæ ‡å‡†èŒƒå¼å’Œæ¶æ„æŒ‡å—

## ğŸ“ MCPçš„æ ‡å‡†ç»“æ„

### æ ¸å¿ƒç»„æˆéƒ¨åˆ†

ä¸€ä¸ªæ ‡å‡†çš„MCP Serverç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š

```
MCP Server
â”œâ”€â”€ 1. Server Info          # æœåŠ¡å™¨å…ƒä¿¡æ¯
â”‚   â”œâ”€â”€ name               # æœåŠ¡å™¨åç§°
â”‚   â””â”€â”€ version            # ç‰ˆæœ¬å·
â”‚
â”œâ”€â”€ 2. Capabilities        # æœåŠ¡å™¨èƒ½åŠ›å£°æ˜
â”‚   â”œâ”€â”€ tools {}           # æ”¯æŒå·¥å…·
â”‚   â”œâ”€â”€ resources {}       # æ”¯æŒèµ„æº
â”‚   â””â”€â”€ prompts {}         # æ”¯æŒæç¤ºæ¨¡æ¿
â”‚
â”œâ”€â”€ 3. Primitives          # ä¸‰å¤§æ ¸å¿ƒåŸè¯­
â”‚   â”œâ”€â”€ Tools             # ğŸ”§ å·¥å…·ï¼ˆæ‰§è¡Œæ“ä½œï¼‰
â”‚   â”‚   â”œâ”€â”€ å®šä¹‰: å¯æ‰§è¡Œçš„å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ ç”¨é€”: APIè°ƒç”¨ã€æ•°æ®åº“æŸ¥è¯¢ã€æ–‡ä»¶æ“ä½œç­‰
â”‚   â”‚   â””â”€â”€ ç‰¹ç‚¹: æœ‰å‰¯ä½œç”¨ï¼Œè¿”å›ç»“æ„åŒ–æ•°æ®
â”‚   â”‚
â”‚   â”œâ”€â”€ Resources         # ğŸ“š èµ„æºï¼ˆæä¾›æ•°æ®ï¼‰
â”‚   â”‚   â”œâ”€â”€ å®šä¹‰: åªè¯»æ•°æ®æº
â”‚   â”‚   â”œâ”€â”€ ç”¨é€”: æ–‡ä»¶å†…å®¹ã€æ•°æ®åº“æ•°æ®ã€APIæ•°æ®
â”‚   â”‚   â””â”€â”€ ç‰¹ç‚¹: ç±»ä¼¼GETï¼Œæ— å‰¯ä½œç”¨
â”‚   â”‚
â”‚   â””â”€â”€ Prompts           # ğŸ’¬ æç¤ºæ¨¡æ¿ï¼ˆé¢„å®šä¹‰äº¤äº’ï¼‰
â”‚       â”œâ”€â”€ å®šä¹‰: å¯é‡ç”¨çš„æç¤ºæ¨¡æ¿
â”‚       â”œâ”€â”€ ç”¨é€”: æ ‡å‡†åŒ–çš„LLMäº¤äº’æ¨¡å¼
â”‚       â””â”€â”€ ç‰¹ç‚¹: å¸¦å‚æ•°çš„æ¨¡æ¿
â”‚
â”œâ”€â”€ 4. Transport           # ä¼ è¾“å±‚
â”‚   â”œâ”€â”€ stdio             # æ ‡å‡†è¾“å…¥è¾“å‡ºï¼ˆæœ¬åœ°ï¼‰
â”‚   â””â”€â”€ SSE               # Server-Sent Eventsï¼ˆè¿œç¨‹ï¼‰
â”‚
â”œâ”€â”€ 5. Request Handlers    # è¯·æ±‚å¤„ç†å™¨
â”‚   â”œâ”€â”€ initialize        # åˆå§‹åŒ–æ¡æ‰‹
â”‚   â”œâ”€â”€ list_tools        # åˆ—å‡ºå·¥å…·
â”‚   â”œâ”€â”€ call_tool         # è°ƒç”¨å·¥å…·
â”‚   â”œâ”€â”€ list_resources    # åˆ—å‡ºèµ„æº
â”‚   â”œâ”€â”€ read_resource     # è¯»å–èµ„æº
â”‚   â”œâ”€â”€ list_prompts      # åˆ—å‡ºæç¤ºæ¨¡æ¿
â”‚   â””â”€â”€ get_prompt        # è·å–æç¤ºæ¨¡æ¿
â”‚
â””â”€â”€ 6. Configuration       # é…ç½®
    â”œâ”€â”€ logging           # æ—¥å¿—é…ç½®
    â”œâ”€â”€ security          # å®‰å…¨é…ç½®
    â””â”€â”€ performance       # æ€§èƒ½é…ç½®
```

---

## ğŸ¯ ä¸‰å¤§æ ¸å¿ƒåŸè¯­è¯¦è§£

### 1. Toolsï¼ˆå·¥å…·ï¼‰- æ‰§è¡Œæ“ä½œ

**å®šä¹‰**ï¼šå¯ä»¥æ‰§è¡Œçš„å‡½æ•°ï¼Œé€šå¸¸æœ‰å‰¯ä½œç”¨

**ä½¿ç”¨åœºæ™¯**ï¼š
- å‘é€æ¶ˆæ¯ï¼ˆSlackã€Emailï¼‰
- æ‰§è¡ŒSQLæŸ¥è¯¢
- åˆ›å»º/ä¿®æ”¹æ–‡ä»¶
- è°ƒç”¨å¤–éƒ¨API
- æ‰§è¡Œç³»ç»Ÿå‘½ä»¤

**ç¤ºä¾‹**ï¼š
```typescript
{
  name: "send_email",
  description: "Send an email to a recipient",
  inputSchema: {
    type: "object",
    properties: {
      to: { type: "string" },
      subject: { type: "string" },
      body: { type: "string" }
    },
    required: ["to", "subject", "body"]
  }
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… å¯ä»¥ä¿®æ”¹çŠ¶æ€
- âœ… å¯ä»¥æœ‰å‰¯ä½œç”¨
- âœ… è¿”å›æ‰§è¡Œç»“æœ
- âš ï¸ éœ€è¦æƒé™æ§åˆ¶

---

### 2. Resourcesï¼ˆèµ„æºï¼‰- æä¾›æ•°æ®

**å®šä¹‰**ï¼šåªè¯»çš„æ•°æ®æºï¼Œç±»ä¼¼RESTçš„GET

**ä½¿ç”¨åœºæ™¯**ï¼š
- è¯»å–æ–‡ä»¶å†…å®¹
- æŸ¥è¯¢æ•°æ®åº“æ•°æ®
- è·å–APIæ•°æ®
- æä¾›é…ç½®ä¿¡æ¯

**ç¤ºä¾‹**ï¼š
```typescript
{
  uri: "file:///path/to/document.txt",
  name: "Project Documentation",
  description: "Main project documentation",
  mimeType: "text/plain"
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… åªè¯»ï¼Œæ— å‰¯ä½œç”¨
- âœ… å¯ä»¥ç¼“å­˜
- âœ… æä¾›ä¸Šä¸‹æ–‡æ•°æ®
- âš ï¸ ä¸åº”è¯¥æ‰§è¡Œå¤æ‚è®¡ç®—

---

### 3. Promptsï¼ˆæç¤ºæ¨¡æ¿ï¼‰- é¢„å®šä¹‰äº¤äº’

**å®šä¹‰**ï¼šå¯é‡ç”¨çš„æç¤ºæ¨¡æ¿ï¼Œå¸¦å‚æ•°

**ä½¿ç”¨åœºæ™¯**ï¼š
- ä»£ç å®¡æŸ¥æ¨¡æ¿
- æ–‡æ¡£ç”Ÿæˆæ¨¡æ¿
- æ•°æ®åˆ†ææ¨¡æ¿
- æ ‡å‡†åŒ–çš„å·¥ä½œæµç¨‹

**ç¤ºä¾‹**ï¼š
```typescript
{
  name: "code_review",
  description: "Review code for bugs and improvements",
  arguments: [
    {
      name: "code",
      description: "The code to review",
      required: true
    },
    {
      name: "language",
      description: "Programming language",
      required: false
    }
  ]
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… æ ‡å‡†åŒ–äº¤äº’
- âœ… å¯å¤ç”¨
- âœ… å‚æ•°åŒ–
- âœ… æé«˜ä¸€è‡´æ€§

---

## ğŸ—ï¸ MCPæ¶æ„æ¨¡å¼

### å•ä¸€èŒè´£åŸåˆ™

```
âŒ ä¸æ¨èï¼šè¶…çº§MCPæœåŠ¡å™¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  God-Server                 â”‚
â”‚  â”œâ”€â”€ SlackåŠŸèƒ½              â”‚
â”‚  â”œâ”€â”€ GitHubåŠŸèƒ½             â”‚
â”‚  â”œâ”€â”€ æ•°æ®åº“åŠŸèƒ½            â”‚
â”‚  â”œâ”€â”€ æ–‡ä»¶ç³»ç»ŸåŠŸèƒ½          â”‚
â”‚  â””â”€â”€ EmailåŠŸèƒ½             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… æ¨èï¼šå¤šä¸ªä¸“æ³¨çš„MCPæœåŠ¡å™¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Slack-MCP  â”‚  â”‚ GitHub-MCP â”‚  â”‚   DB-MCP   â”‚
â”‚  Focused   â”‚  â”‚  Focused   â”‚  â”‚  Focused   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Host (Claude)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ Client  â”‚ (1:1 connection)
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ Server  â”‚
    â”‚  Tools  â”‚
    â”‚Resourcesâ”‚
    â”‚ Prompts â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ æ ‡å‡†é¡¹ç›®ç»“æ„

### TypeScript MCP Server
```
my-mcp-server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # å…¥å£ç‚¹
â”‚   â”œâ”€â”€ server.ts             # MCP Serveræ ¸å¿ƒ
â”‚   â”œâ”€â”€ tools/                # å·¥å…·å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ tool1.ts
â”‚   â”‚   â””â”€â”€ tool2.ts
â”‚   â”œâ”€â”€ resources/            # èµ„æºå®šä¹‰
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ resource1.ts
â”‚   â”œâ”€â”€ prompts/              # æç¤ºæ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ prompt1.ts
â”‚   â”œâ”€â”€ types/                # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ logger.ts
â”œâ”€â”€ tests/                    # æµ‹è¯•
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

### Python MCP Server
```
my_mcp_server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ server.py             # MCP Serveræ ¸å¿ƒ
â”‚   â”œâ”€â”€ tools/                # å·¥å…·å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ tool1.py
â”‚   â”‚   â””â”€â”€ tool2.py
â”‚   â”œâ”€â”€ resources/            # èµ„æºå®šä¹‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ resource1.py
â”‚   â”œâ”€â”€ prompts/              # æç¤ºæ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ prompt1.py
â”‚   â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ logger.py
â”œâ”€â”€ tests/                    # æµ‹è¯•
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

---

## ğŸ”„ æ ‡å‡†ç”Ÿå‘½å‘¨æœŸ

```
1. Initialize
   â”œâ”€â”€ Client â†’ Server: initialize request
   â”œâ”€â”€ Server â†’ Client: capabilities
   â””â”€â”€ Handshakeå®Œæˆ

2. Capability Discovery
   â”œâ”€â”€ Client: list_tools
   â”œâ”€â”€ Client: list_resources
   â””â”€â”€ Client: list_prompts

3. Operation
   â”œâ”€â”€ call_tool (æ‰§è¡Œå·¥å…·)
   â”œâ”€â”€ read_resource (è¯»å–èµ„æº)
   â””â”€â”€ get_prompt (è·å–æ¨¡æ¿)

4. Shutdown
   â””â”€â”€ Close connection
```

---

## ğŸ” å®‰å…¨æœ€ä½³å®è·µ

1. **è¾“å…¥éªŒè¯**
   - ä½¿ç”¨schemaéªŒè¯æ‰€æœ‰è¾“å…¥
   - é˜²æ­¢æ³¨å…¥æ”»å‡»

2. **æƒé™æ§åˆ¶**
   - æ˜ç¡®å·¥å…·çš„æƒé™éœ€æ±‚
   - æœ€å°æƒé™åŸåˆ™

3. **æ—¥å¿—è®°å½•**
   - è®°å½•æ‰€æœ‰æ“ä½œåˆ°stderr
   - ä¸æ³„éœ²æ•æ„Ÿä¿¡æ¯

4. **é”™è¯¯å¤„ç†**
   - ä¼˜é›…å¤„ç†é”™è¯¯
   - ä¸æš´éœ²å†…éƒ¨å®ç°ç»†èŠ‚

---

## ğŸ“Š æ€§èƒ½è€ƒè™‘

1. **å“åº”æ—¶é—´**
   - Tools: < 5ç§’
   - Resources: < 1ç§’
   - Prompts: å³æ—¶

2. **èµ„æºç®¡ç†**
   - é€‚å½“çš„è¶…æ—¶è®¾ç½®
   - è¿æ¥æ± ç®¡ç†
   - ç¼“å­˜ç­–ç•¥

3. **å¹¶å‘æ§åˆ¶**
   - é™åˆ¶å¹¶å‘è¯·æ±‚æ•°
   - é˜Ÿåˆ—ç®¡ç†

---

## ğŸ¨ å‘½åè§„èŒƒ

**Server Name**: `<provider>-<functionality>-mcp`
- ä¾‹å­: `github-api-mcp`, `postgres-db-mcp`

**Tool Name**: åŠ¨è¯_åè¯æ ¼å¼
- ä¾‹å­: `send_message`, `query_database`, `create_file`

**Resource URI**: æ ‡å‡†URIæ ¼å¼
- ä¾‹å­: `file:///path/to/file`, `db://table/row`, `api://endpoint/data`

**Prompt Name**: æè¿°æ€§åç§°
- ä¾‹å­: `code_review`, `generate_docs`, `analyze_data`

---

## ğŸš€ å¿«é€Ÿå¼€å§‹æ£€æŸ¥æ¸…å•

å¼€å‘æ–°MCP Serveræ—¶ï¼Œç¡®ä¿ï¼š

- [ ] æ˜ç¡®å•ä¸€èŒè´£
- [ ] å®šä¹‰Server Info (name, version)
- [ ] å£°æ˜Capabilities
- [ ] å®ç°è‡³å°‘ä¸€ä¸ªPrimitive (Tool/Resource/Prompt)
- [ ] é…ç½®Transport (stdioæˆ–SSE)
- [ ] å®ç°å¿…éœ€çš„Request Handlers
- [ ] æ·»åŠ é€‚å½“çš„æ—¥å¿—è®°å½•ï¼ˆåˆ°stderrï¼‰
- [ ] ç¼–å†™æµ‹è¯•ç”¨ä¾‹
- [ ] æä¾›ä½¿ç”¨æ–‡æ¡£
- [ ] è€ƒè™‘å®‰å…¨æ€§

---

## ğŸ“š å‚è€ƒèµ„æº

- [MCP Specification](https://spec.modelcontextprotocol.io/)
- [MCP Best Practices](https://modelcontextprotocol.info/docs/best-practices/)
- [Official Python SDK](https://github.com/modelcontextprotocol/python-sdk)
- [Official TypeScript SDK](https://github.com/modelcontextprotocol/typescript-sdk)

---

**ä¸‹ä¸€æ­¥**: æŸ¥çœ‹ [QUICK_START_PYTHON.md](./QUICK_START_PYTHON.md) æˆ– [QUICK_START_TYPESCRIPT.md](./QUICK_START_TYPESCRIPT.md) è·å–å…·ä½“çš„å®ç°æ¨¡æ¿ã€‚
